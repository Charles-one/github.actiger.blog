<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <title>基本SQL语句用法 - Actiger跳跳虎</title>
    
    <meta name="description" content="建立表 4个表关系 1.学生表
Student(s_id,s_name,s_birth,s_sex) –学生编号,学生姓名, 出生年月,学生性别
2.课程表
Course(c_id,c_name,t_id) – –课程编号, 课程名称, 教师编号
3.教师表
Teacher(t_id,t_name) –教师编号,教师姓名
4.成绩表
Score(s_id,c_id,s_s_score) –学生编号,课程编号,分数
-- 学生表 CREATE TABLE Student( s_id VARCHAR(20), s_name VARCHAR(20) NOT NULL DEFAULT &#39;&#39;, s_birth VARCHAR(20) NOT NULL DEFAULT &#39;&#39;, s_sex VARCHAR(10) NOT NULL DEFAULT &#39;&#39;, PRIMARY KEY(s_id) ); -- 课程表 CREATE TABLE Course( c_id VARCHAR(20), c_name VARCHAR(20) NOT NULL DEFAULT &#39;&#39;, t_id VARCHAR(20) NOT NULL, PRIMARY KEY(c_id) ); -- 教师表 CREATE TABLE Teacher( t_id VARCHAR(20), t_name VARCHAR(20) NOT NULL DEFAULT &#39;&#39;, PRIMARY KEY(t_id) ); -- 成绩表 CREATE TABLE `Score`( s_id VARCHAR(20), c_id VARCHAR(20), s_score INT(3), PRIMARY KEY(s_id,c_id) ); 插入对应的数据 -- 插入学生表测试数据 insert into Student values(&#39;01&#39; , &#39;赵雷&#39; , &#39;1990-01-01&#39; , &#39;男&#39;); insert into Student values(&#39;02&#39; , &#39;钱电&#39; , &#39;1990-12-21&#39; , &#39;男&#39;); insert into Student values(&#39;03&#39; , &#39;孙风&#39; , &#39;1990-05-20&#39; , &#39;男&#39;); insert into Student values(&#39;04&#39; , &#39;李云&#39; , &#39;1990-08-06&#39; , &#39;男&#39;); insert into Student values(&#39;05&#39; , &#39;周梅&#39; , &#39;1991-12-01&#39; , &#39;女&#39;); insert into Student values(&#39;06&#39; , &#39;吴兰&#39; , &#39;1992-03-01&#39; , &#39;女&#39;); insert into Student values(&#39;07&#39; , &#39;郑竹&#39; , &#39;1989-07-01&#39; , &#39;女&#39;); insert into Student values(&#39;08&#39; , &#39;王菊&#39; , &#39;1990-01-20&#39; , &#39;女&#39;); insert into Student values(&#39;09&#39; , &#39;如花&#39; , &#39;1991-02-15&#39; , &#39;女&#39;); -- 课程表测试数据 insert into Course values(&#39;01&#39; , &#39;语文&#39; , &#39;02&#39;); insert into Course values(&#39;02&#39; , &#39;数学&#39; , &#39;01&#39;); insert into Course values(&#39;03&#39; , &#39;英语&#39; , &#39;03&#39;); insert into Course values(&#39;04&#39; , &#39;体育&#39; , &#39;01&#39;); -- 教师表测试数据 insert into Teacher values(&#39;01&#39; , &#39;张三&#39;); insert into Teacher values(&#39;02&#39; , &#39;李四&#39;); insert into Teacher values(&#39;03&#39; , &#39;王五&#39;); -- 成绩表测试数据 insert into Score values(&#39;01&#39; , &#39;01&#39; , 80); insert into Score values(&#39;01&#39; , &#39;02&#39; , 90); insert into Score values(&#39;01&#39; , &#39;03&#39; , 99); insert into Score values(&#39;02&#39; , &#39;01&#39; , 70); insert into Score values(&#39;02&#39; , &#39;02&#39; , 60); insert into Score values(&#39;02&#39; , &#39;03&#39; , 80); insert into Score values(&#39;03&#39; , &#39;01&#39; , 80); insert into Score values(&#39;03&#39; , &#39;02&#39; , 80); insert into Score values(&#39;03&#39; , &#39;03&#39; , 80); insert into Score values(&#39;04&#39; , &#39;01&#39; , 50); insert into Score values(&#39;04&#39; , &#39;02&#39; , 30); insert into Score values(&#39;04&#39; , &#39;03&#39; , 20); insert into Score values(&#39;05&#39; , &#39;01&#39; , 76); insert into Score values(&#39;05&#39; , &#39;02&#39; , 87); insert into Score values(&#39;06&#39; , &#39;01&#39; , 31); insert into Score values(&#39;06&#39; , &#39;03&#39; , 34); insert into Score values(&#39;07&#39; , &#39;02&#39; , 89); insert into Score values(&#39;07&#39; , &#39;03&#39; , 98); insert into Score values(&#39;09&#39;, &#39;01&#39;, 50); insert into Score values(&#39;09&#39;, &#39;02&#39;, 40); insert into Score values(&#39;09&#39;, &#39;03&#39;, 90); insert into Score values(&#39;09&#39;, &#39;04&#39;, 99); SQL练习  查询姓&quot;张&quot;老师的个数  select count(t_id) from Teacher where t_name like &#34;张%&#34;;  查询1990年出生的学生名单  select s_id, s_name from Student where year(s_birth)=1990;  查询课程编号为&quot;02&quot;的总成绩  select c_id,sum(s_score) as &#39;总成绩&#39; from Score where c_id=02;  查询选了课程的学生人数 思路学生唯一, 然后再计算总数  select count(distinct s_id) as &#34;选课人数&#34; from Score;  查询各科成绩最高和最低的分: 以如下的形式显示: 课程ID, 最高分, 最低分  select c_id as 课程ID, max(s_score) as 最高分, min(s_score) as 最低分 from Score group by c_id;  查询每门课程被选修的学生数  select c_id, count(s_id) from Score group by c_id;  查询男生,女生人数  select s_sex as 性别, count(s_id) as 人数 from Student group by s_sex;  查询平均成绩大于60分的学生的学号和平均成绩  学号与平均成绩都在Score表中可以获取到">
    <meta name="author" content="">
    
    <link href="https://charles-one.github.io/actiger/an-old-hope.min.css" rel="stylesheet">
    <link href="https://charles-one.github.io/actiger/style.css" rel="stylesheet">
    
    <link rel="apple-touch-icon" href="https://charles-one.github.io/actiger/apple-touch-icon.png">
    <link rel="icon" href="https://charles-one.github.io/actiger/favicon.ico">
    <meta name="generator" content="Hugo 0.69.0" />
    
    <link rel="alternate" type="application/atom+xml" href="https://charles-one.github.io/actiger/index.xml" title="Actiger跳跳虎">
    
    
    <script>
      function setTheme() {
        const time = new Date();

        const prev = localStorage.getItem('date');
        const date = String(time.getMonth() + 1) + '.' + String(time.getDate());

        const now = time.getTime();
        let sunrise;
        let sunset;

        function setBodyClass() {
          if (now > sunrise && now < sunset) return;
          document.body.classList.add('dark');
        }

        if (date !== prev) {
          fetch('https://api.ipgeolocation.io/astronomy?apiKey=5ed37d85103e4defa5df4c5298ed5215')
            .then(res => res.json())
            .then(data => {
              sunrise = data.sunrise.split(':').map(Number);
              sunset = data.sunset.split(':').map(Number);
            })
            .catch(() => {
              sunrise = [7, 0];
              sunset = [19, 0];
            })
            .finally(() => {
              sunrise = time.setHours(sunrise[0], sunrise[1], 0);
              sunset = time.setHours(sunset[0], sunset[1], 0);
              setBodyClass();
              localStorage.setItem('sunrise', sunrise);
              localStorage.setItem('sunset', sunset);
            });
          localStorage.setItem('date', date);
        } else {
          sunrise = Number(localStorage.getItem('sunrise'));
          sunset = Number(localStorage.getItem('sunset'));
          setBodyClass();
        }
      }
    </script>
  </head>
  <body class="single">
    <script>
      setTheme();
    </script>
    <header class="header">
      <nav class="nav">
        <p class="logo"><a href="https://charles-one.github.io/actiger/">Actiger跳跳虎</a></p>
      </nav>
    </header>
    <main class="main">


<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">基本SQL语句用法</h1>
    <div class="post-meta">March 12, 2019</div>
  </header>
  <div class="post-content"><h3 id="建立表-4个表关系">建立表 4个表关系</h3>
<p>1.学生表</p>
<p>Student(s_id,s_name,s_birth,s_sex) –学生编号,学生姓名, 出生年月,学生性别</p>
<p>2.课程表</p>
<p>Course(c_id,c_name,t_id) – –课程编号, 课程名称, 教师编号</p>
<p>3.教师表</p>
<p>Teacher(t_id,t_name) –教师编号,教师姓名</p>
<p>4.成绩表</p>
<p>Score(s_id,c_id,s_s_score) –学生编号,课程编号,分数</p>
<pre><code>-- 学生表
CREATE TABLE Student(
s_id VARCHAR(20),
s_name VARCHAR(20) NOT NULL DEFAULT '',
s_birth VARCHAR(20) NOT NULL DEFAULT '',
s_sex VARCHAR(10) NOT NULL DEFAULT '',
PRIMARY KEY(s_id)
);

-- 课程表
CREATE TABLE Course(
c_id VARCHAR(20),
c_name VARCHAR(20) NOT NULL DEFAULT '',
t_id VARCHAR(20) NOT NULL,
PRIMARY KEY(c_id)
);

-- 教师表
CREATE TABLE Teacher(
t_id VARCHAR(20),
t_name VARCHAR(20) NOT NULL DEFAULT '',
PRIMARY KEY(t_id)
);

-- 成绩表
CREATE TABLE `Score`(
s_id VARCHAR(20),
c_id VARCHAR(20),
s_score INT(3),
PRIMARY KEY(s_id,c_id)
);

</code></pre><h4 id="插入对应的数据">插入对应的数据</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 插入学生表测试数据
</span><span style="color:#75715e"></span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#e6db74">&#39;赵雷&#39;</span> , <span style="color:#e6db74">&#39;1990-01-01&#39;</span> , <span style="color:#e6db74">&#39;男&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#e6db74">&#39;钱电&#39;</span> , <span style="color:#e6db74">&#39;1990-12-21&#39;</span> , <span style="color:#e6db74">&#39;男&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#e6db74">&#39;孙风&#39;</span> , <span style="color:#e6db74">&#39;1990-05-20&#39;</span> , <span style="color:#e6db74">&#39;男&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;04&#39;</span> , <span style="color:#e6db74">&#39;李云&#39;</span> , <span style="color:#e6db74">&#39;1990-08-06&#39;</span> , <span style="color:#e6db74">&#39;男&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;05&#39;</span> , <span style="color:#e6db74">&#39;周梅&#39;</span> , <span style="color:#e6db74">&#39;1991-12-01&#39;</span> , <span style="color:#e6db74">&#39;女&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;06&#39;</span> , <span style="color:#e6db74">&#39;吴兰&#39;</span> , <span style="color:#e6db74">&#39;1992-03-01&#39;</span> , <span style="color:#e6db74">&#39;女&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;07&#39;</span> , <span style="color:#e6db74">&#39;郑竹&#39;</span> , <span style="color:#e6db74">&#39;1989-07-01&#39;</span> , <span style="color:#e6db74">&#39;女&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;08&#39;</span> , <span style="color:#e6db74">&#39;王菊&#39;</span> , <span style="color:#e6db74">&#39;1990-01-20&#39;</span> , <span style="color:#e6db74">&#39;女&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Student <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;09&#39;</span> , <span style="color:#e6db74">&#39;如花&#39;</span> , <span style="color:#e6db74">&#39;1991-02-15&#39;</span> , <span style="color:#e6db74">&#39;女&#39;</span>);

<span style="color:#75715e">-- 课程表测试数据
</span><span style="color:#75715e"></span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Course <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#e6db74">&#39;语文&#39;</span> , <span style="color:#e6db74">&#39;02&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Course <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#e6db74">&#39;数学&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Course <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#e6db74">&#39;英语&#39;</span> , <span style="color:#e6db74">&#39;03&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Course <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;04&#39;</span> , <span style="color:#e6db74">&#39;体育&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span>);

<span style="color:#75715e">-- 教师表测试数据
</span><span style="color:#75715e"></span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Teacher <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#e6db74">&#39;张三&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Teacher <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#e6db74">&#39;李四&#39;</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Teacher <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#e6db74">&#39;王五&#39;</span>);

<span style="color:#75715e">-- 成绩表测试数据
</span><span style="color:#75715e"></span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#ae81ff">80</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#ae81ff">90</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#ae81ff">99</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#ae81ff">70</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#ae81ff">60</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#ae81ff">80</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#ae81ff">80</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#ae81ff">80</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#ae81ff">80</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;04&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#ae81ff">50</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;04&#39;</span> , <span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#ae81ff">30</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;04&#39;</span> , <span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#ae81ff">20</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;05&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#ae81ff">76</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;05&#39;</span> , <span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#ae81ff">87</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;06&#39;</span> , <span style="color:#e6db74">&#39;01&#39;</span> , <span style="color:#ae81ff">31</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;06&#39;</span> , <span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#ae81ff">34</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;07&#39;</span> , <span style="color:#e6db74">&#39;02&#39;</span> , <span style="color:#ae81ff">89</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;07&#39;</span> , <span style="color:#e6db74">&#39;03&#39;</span> , <span style="color:#ae81ff">98</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;09&#39;</span>, <span style="color:#e6db74">&#39;01&#39;</span>, <span style="color:#ae81ff">50</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;09&#39;</span>, <span style="color:#e6db74">&#39;02&#39;</span>, <span style="color:#ae81ff">40</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;09&#39;</span>, <span style="color:#e6db74">&#39;03&#39;</span>, <span style="color:#ae81ff">90</span>);
<span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> Score <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;09&#39;</span>, <span style="color:#e6db74">&#39;04&#39;</span>, <span style="color:#ae81ff">99</span>);

</code></pre></div><h3 id="sql练习">SQL练习</h3>
<ul>
<li>查询姓&quot;张&quot;老师的个数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(t_id) <span style="color:#66d9ef">from</span> Teacher <span style="color:#66d9ef">where</span> t_name <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#34;张%&#34;</span>;
</code></pre></div><ul>
<li>查询1990年出生的学生名单</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id, s_name <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">where</span> <span style="color:#66d9ef">year</span>(s_birth)<span style="color:#f92672">=</span><span style="color:#ae81ff">1990</span>;
</code></pre></div><ul>
<li>查询课程编号为&quot;02&quot;的总成绩</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> c_id,<span style="color:#66d9ef">sum</span>(s_score) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;总成绩&#39;</span> <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> c_id<span style="color:#f92672">=</span><span style="color:#ae81ff">02</span>;
</code></pre></div><ul>
<li>查询选了课程的学生人数
思路学生唯一, 然后再计算总数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(<span style="color:#66d9ef">distinct</span> s_id) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#34;选课人数&#34;</span> <span style="color:#66d9ef">from</span> Score;
</code></pre></div><ul>
<li>查询各科成绩最高和最低的分: 以如下的形式显示: 课程ID, 最高分, 最低分</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> c_id <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">课程</span>ID, <span style="color:#66d9ef">max</span>(s_score) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">最高分</span>, <span style="color:#66d9ef">min</span>(s_score) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">最低分</span> <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id;
</code></pre></div><ul>
<li>查询每门课程被选修的学生数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> c_id, <span style="color:#66d9ef">count</span>(s_id) <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id;
</code></pre></div><ul>
<li>查询男生,女生人数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_sex <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">性别</span>, <span style="color:#66d9ef">count</span>(s_id) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">人数</span> <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_sex;
</code></pre></div><ul>
<li>查询平均成绩大于60分的学生的学号和平均成绩</li>
</ul>
<p>学号与平均成绩都在Score表中可以获取到</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">学号</span>, <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">平均成绩</span> <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">avg</span>(s_score)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">60</span>;
</code></pre></div><ul>
<li>查询至少选修两门课程的学生学号
学生学号与学生选修课程数都在Score表中</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">学号</span>,<span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">选修课程数</span> <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">2</span>;
</code></pre></div><ul>
<li>查询两门以上不及格课程的同学的学号及其平均成绩</li>
</ul>
<h4 id="这种做法是错误的-只计算不及格课程的平均成绩-如果还有其他课程及格就未计算在内了">这种做法是错误的, 只计算不及格课程的平均成绩, 如果还有其他课程及格就未计算在内了</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">学号</span>, <span style="color:#66d9ef">avg</span>(s_score)<span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">平均成绩</span>
<span style="color:#66d9ef">from</span> Score
<span style="color:#66d9ef">where</span> s_score <span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span>
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id
<span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">2</span>;
</code></pre></div><h4 id="学生学号-学生不及格课程总数-平均成绩都在score表中-但是一条语句无法查询出来不及格条件后的平均成绩是不正确即是不及格课程的平均成绩不是总成绩包含及格与不及格课程成绩">学生学号, 学生不及格课程总数, 平均成绩都在Score表中, 但是一条语句无法查询出来,不及格条件后的平均成绩是不正确(即是不及格课程的平均成绩),不是总成绩(包含及格与不及格课程成绩).</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 查询到不及格课程总断&gt;2的学生
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">2</span>;

<span style="color:#75715e">-- 查询学生的总成绩计算的平均成绩
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id,<span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id;

<span style="color:#75715e">-- 将2表内连接起来
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s1.s_id, s2.avg_score
<span style="color:#66d9ef">from</span>
(<span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">as</span> s1
<span style="color:#66d9ef">join</span>
(<span style="color:#66d9ef">select</span> s_id,<span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id) <span style="color:#66d9ef">as</span> s2
<span style="color:#66d9ef">on</span> s1.s_id<span style="color:#f92672">=</span>s2.s_id;
</code></pre></div><h4 id="这次查询不及格课程数1的学生学号平均成绩09号有3门课程三门成绩405090360-错误做法只计算不及格成绩4050245">这次查询不及格课程数&gt;1的学生,学号,平均成绩.(&ldquo;09号有3门课程,三门成绩(40+50+90)/3=60&rdquo;, 错误做法只计算不及格成绩(40+50)/2=45)</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">
<span style="color:#75715e">-- 错误做法
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">学号</span>, <span style="color:#66d9ef">avg</span>(s_score)<span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">平均成绩</span>
<span style="color:#66d9ef">from</span> Score
<span style="color:#66d9ef">where</span> s_score <span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span>
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id
<span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">1</span>;

<span style="color:#75715e">-- 正确做法
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s1.s_id, s2.avg_score
<span style="color:#66d9ef">from</span>
(<span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">as</span> s1
<span style="color:#66d9ef">join</span>
(<span style="color:#66d9ef">select</span> s_id,<span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id) <span style="color:#66d9ef">as</span> s2
<span style="color:#66d9ef">on</span> s1.s_id<span style="color:#f92672">=</span>s2.s_id;
</code></pre></div><ul>
<li>查询名字完全一致的学生, 统计同名人数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 名字, 同名人数都在表Student中
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_name, <span style="color:#66d9ef">count</span>(s_id) <span style="color:#66d9ef">as</span> <span style="color:#960050;background-color:#1e0010">同名人数</span> <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_name <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(s_id)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">1</span>;
</code></pre></div><ul>
<li>查询每门课程的平均成绩，结果按平均成绩升序排序，平均成绩相同时，按课程号降序排列</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> c_id, <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;平均成绩&#39;</span> <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">ASC</span>, c_id <span style="color:#66d9ef">DESC</span>;
</code></pre></div><ul>
<li>查询不及格课程号和学生号, 课程号从大到小排列</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 这些不及格课程号与学生号数据都在Score表中
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s_id, c_id, s_score <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_score <span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span>;
</code></pre></div><ul>
<li>检索课程编号为“03”且分数小于60的学生学号，结果按按分数降序排列</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id, s_score <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> c_id<span style="color:#f92672">=</span><span style="color:#ae81ff">03</span> <span style="color:#66d9ef">and</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span>;
</code></pre></div><ul>
<li>统计每门课程的学生选修人数(超过5人的课程才统计), 要求输出课程号和选修人数，查询结果按人数降序排序，若人数相同，按课程号升序排序</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> c_id, <span style="color:#66d9ef">count</span>(s_id) <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(s_id)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">5</span> <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">count</span>(s_id) <span style="color:#66d9ef">DESC</span>, c_id <span style="color:#66d9ef">ASC</span>;
</code></pre></div><ul>
<li>查询所有课程成绩小于60分的学生的学号、姓名.
学生成绩在表Score中, 学生姓名在表Student, 内连接2个表</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 小于60分的学生号
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id, s_score <span style="color:#66d9ef">where</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span>;

<span style="color:#75715e">-- 学生姓名
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s_id, s_name <span style="color:#66d9ef">from</span> Student;

<span style="color:#75715e">-- 通过s_id内连接2个表, 2个成绩&lt;60分会有2条数据, 可用group by去重
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> sco.s_id,s.s_name <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">as</span> sco <span style="color:#66d9ef">join</span> Student <span style="color:#66d9ef">as</span> s <span style="color:#66d9ef">on</span> sco.s_id<span style="color:#f92672">=</span>s.s_id <span style="color:#66d9ef">where</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id;

<span style="color:#75715e">-- 还可以这么写
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id,s_name <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">where</span> s_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span>);
</code></pre></div><ul>
<li>查询没有学全所有课的学生的学号、姓名</li>
</ul>
<h4 id="全部课程数在course中-学生所选课程在score中-学生姓名在student中隐藏条件学生所学课程一定属于全部课程中的一种">全部课程数在Course中, 学生所选课程在Score中, 学生姓名在Student中.(隐藏条件学生所学课程一定属于全部课程中的一种)</h4>
<h4 id="理解是学没有学全所有课程的所有学号与学生姓名注意是所有学生">理解是学没有学全所有课程的所有学号与学生姓名(注意是所有学生)</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 查询全部课程数
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">from</span> Course;

<span style="color:#75715e">-- 查询学生学号与课程数
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id, <span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">as</span> count_cid <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id;

<span style="color:#75715e">-- 查询学生学号与学生姓名
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id, s_name <span style="color:#66d9ef">from</span> Student;

<span style="color:#75715e">-- 左连Student与Score表, 为什么左连接, 因为是没有学无所有课程的学生, 学生一定会有, 学生不一定有选修的课程成绩.
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s.s_id, s.s_name <span style="color:#66d9ef">from</span> 
Student <span style="color:#66d9ef">as</span> s 
<span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> 
Score <span style="color:#66d9ef">as</span> sco 
<span style="color:#66d9ef">on</span> sco.s_id<span style="color:#f92672">=</span>s.s_id 
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s.s_id 
<span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">&lt;</span>(<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">from</span> Course);

</code></pre></div><ul>
<li>查询出只选修了两门课程的全部学生的学号和姓名</li>
</ul>
<h4 id="学生选修课程数在score表中-学生姓名在表student中">学生选修课程数在Score表中, 学生姓名在表Student中</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">
<span style="color:#75715e">-- 查询学生选择课程数为2的学生
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id,<span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;

<span style="color:#75715e">-- 查询学生姓名
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s_id, s_name <span style="color:#66d9ef">from</span> Student;

<span style="color:#75715e">-- 左连接2个表
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s.s_id, s.s_name <span style="color:#66d9ef">from</span> 
Student <span style="color:#66d9ef">as</span> s 
<span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span> 
Score <span style="color:#66d9ef">as</span> sco 
<span style="color:#66d9ef">on</span> s.s_id<span style="color:#f92672">=</span>sco.s_id
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s.s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;

</code></pre></div><ul>
<li>查询课程编号为03且课程成绩在80分以上的学生的学号和姓名</li>
</ul>
<h4 id="学生选修课程与成绩在score表中-学生姓名在表student中">学生选修课程与成绩在Score表中, 学生姓名在表Student中</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 查询课程03,&gt;80的学生成绩
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s_id, s_score, c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> c_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;03&#34;</span> <span style="color:#66d9ef">and</span> s_score<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">80</span>;

<span style="color:#75715e">-- 查询学生姓名
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s_id, s_name <span style="color:#66d9ef">from</span> Student;

<span style="color:#75715e">-- 内连接2个表, 注意不是左右连接,有对应成绩的才检索,否则不检索
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s.s_id, s.s_name <span style="color:#66d9ef">from</span> 
Student <span style="color:#66d9ef">as</span> s 
<span style="color:#66d9ef">join</span> 
Score <span style="color:#66d9ef">as</span> sco 
<span style="color:#66d9ef">on</span> s.s_id<span style="color:#f92672">=</span>sco.s_id
<span style="color:#66d9ef">and</span> sco.s_score<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">80</span> <span style="color:#66d9ef">and</span> sco.c_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;03&#34;</span>;

<span style="color:#75715e">-- 其他写法
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s_id, s_name <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">where</span> s_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_score<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">80</span> <span style="color:#66d9ef">and</span> c_id<span style="color:#f92672">=</span><span style="color:#ae81ff">03</span>);
</code></pre></div><ul>
<li>查询课程编号为“01”的课程比“02”的课程成绩高的所有学生的学号
内连接 s1同学.s_id=s2同学.s_id, s1.c_id=&quot;01&rdquo;, s2.c_id=&quot;02&rdquo;, s1.s_score&gt;s2.s_score, 最后去重</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s1.s_id <span style="color:#66d9ef">from</span> Score s1,Score s2 <span style="color:#66d9ef">where</span> s1.s_id<span style="color:#f92672">=</span>s2.s_id <span style="color:#66d9ef">and</span> s1.c_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;01&#34;</span> <span style="color:#66d9ef">and</span> s2.c_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;02&#34;</span> <span style="color:#66d9ef">and</span> s1.s_score<span style="color:#f92672">&gt;</span>s2.s_score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s1.s_id;
</code></pre></div><ul>
<li>按平均成绩从高到低，按如下形式显示: 学生ID, 有效课程数, 有效平均分</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id <span style="color:#e6db74">&#39;学生ID&#39;</span>, <span style="color:#66d9ef">count</span>(c_id) <span style="color:#e6db74">&#39;有效课程数&#39;</span>, <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#e6db74">&#39;有效平均分&#39;</span> <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id;
</code></pre></div><ul>
<li>使用分段[100-85],[85-70],[70-60],[&lt;60]来统计各科成绩，分别统计各分数段人数: 课程ID和课程名称</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">c</span>.c_id, <span style="color:#66d9ef">c</span>.c_name, <span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> sco.s_score<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">85</span> <span style="color:#66d9ef">and</span> sco.s_score<span style="color:#f92672">&lt;=</span><span style="color:#ae81ff">100</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;[100-85]&#39;</span>,
<span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> sco.s_score<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">70</span> <span style="color:#66d9ef">and</span> sco.s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">85</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;[85-70]&#39;</span>,
<span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> sco.s_score<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">and</span> sco.s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">70</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;[70-60]&#39;</span>,
<span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> sco.s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;[&lt;60]&#39;</span>
<span style="color:#66d9ef">from</span> Course <span style="color:#66d9ef">c</span>  <span style="color:#66d9ef">join</span>  Score sco <span style="color:#66d9ef">on</span> sco.c_id<span style="color:#f92672">=</span><span style="color:#66d9ef">c</span>.c_id <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">c</span>.c_id;
</code></pre></div><ul>
<li>查询出每门课程的及格人数和不及格人数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> c_id,
<span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> s_score<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;及格人数&#39;</span>,
<span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;不及格人数&#39;</span> 
<span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id;
</code></pre></div><ul>
<li>查询出每门课程的及格百分数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> c_id, sco.<span style="color:#960050;background-color:#1e0010">及格人数</span><span style="color:#f92672">/</span>(sco.<span style="color:#960050;background-color:#1e0010">及格人数</span><span style="color:#f92672">+</span>sco.<span style="color:#960050;background-color:#1e0010">不及格人数</span>)<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span> <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;及格百分比&#39;</span> <span style="color:#66d9ef">from</span> (
<span style="color:#66d9ef">select</span> c_id, 
<span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> s_score<span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;及格人数&#39;</span>,
<span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> s_score<span style="color:#f92672">&lt;</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> <span style="color:#e6db74">&#39;不及格人数&#39;</span> 
<span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id
) <span style="color:#66d9ef">as</span> sco;
</code></pre></div><ul>
<li>查询至少有一门课与学号为“01”的学生所学课程相同的学生的学号和姓名</li>
</ul>
<h4 id="注意是其他学生-应该去除自己s_id01的情况">注意是其他学生, 应该去除自己s_id=&quot;01&quot;的情况</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id,s_name <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">where</span> s_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> c_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;02&#34;</span>) <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id);

<span style="color:#75715e">-- 内连接
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s.s_id, s.s_name <span style="color:#66d9ef">from</span> 
Student s <span style="color:#66d9ef">join</span> Score sco <span style="color:#66d9ef">on</span> s.s_id<span style="color:#f92672">=</span>sco.s_id <span style="color:#66d9ef">and</span> sco.c_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;01&#39;</span>) <span style="color:#66d9ef">and</span> sco.s_id<span style="color:#f92672">&lt;&gt;</span><span style="color:#ae81ff">01</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s.s_id;;
</code></pre></div><ul>
<li>查询和“01”号同学所学课程完全相同的其他同学的学号</li>
</ul>
<h4 id="注意是其他学生-应该去除自己s_id01的情况-1">注意是其他学生, 应该去除自己s_id=&quot;01&quot;的情况</h4>
<h4 id="属于的01学生的课程数-应该与01学生的总课程数一致才算完全一致">属于的&quot;01&quot;学生的课程数, 应该与&quot;01&quot;学生的总课程数一致才算完全一致.</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 计算&#34;01&#34;号学生的课程数
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;01&#34;</span>;

<span style="color:#75715e">-- 计算其他学生属于&#34;01&#34;课程的课程数
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> c_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;01&#34;</span>) <span style="color:#66d9ef">and</span> s_id<span style="color:#f92672">&lt;&gt;</span><span style="color:#ae81ff">01</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">=</span>(<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">where</span> s_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;01&#34;</span>);
</code></pre></div><ul>
<li>把“SCORE”表中“张三”老师教的课的成绩都更改为此课程的平均成绩</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 查询&#34;张三老师名字和id&#34;
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> t_id, t_name <span style="color:#66d9ef">from</span> Teacher <span style="color:#66d9ef">where</span> t_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;张三&#34;</span>;

<span style="color:#75715e">-- 查询张三老师的课程
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> t_id, c_id <span style="color:#66d9ef">from</span> Course <span style="color:#66d9ef">where</span> t_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> t_id <span style="color:#66d9ef">from</span> Teacher <span style="color:#66d9ef">where</span> t_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;张三&#34;</span>);

<span style="color:#75715e">-- 课程分组的平均成绩
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score,c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id;

<span style="color:#75715e">-- 张三老师课程与课程分组平均成绩内连接
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> t.t_id, t.c_id, sco.avg_score <span style="color:#66d9ef">from</span> 
(<span style="color:#66d9ef">select</span> t_id, c_id <span style="color:#66d9ef">from</span> Course <span style="color:#66d9ef">where</span> t_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> t_id <span style="color:#66d9ef">from</span> Teacher <span style="color:#66d9ef">where</span> t_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;张三&#34;</span>)) t
<span style="color:#66d9ef">join</span> 
(<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score,c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id) sco
<span style="color:#66d9ef">on</span> t.c_id<span style="color:#f92672">=</span>sco.c_id;

<span style="color:#75715e">-- 内连接得到老师和学生课程成绩和每科的平均成绩
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">as</span> ss1 <span style="color:#66d9ef">join</span> (<span style="color:#66d9ef">select</span> sco.c_id <span style="color:#66d9ef">as</span> sco_cid,sco.avg_score <span style="color:#66d9ef">as</span> sco_avg_socre <span style="color:#66d9ef">from</span> 
(<span style="color:#66d9ef">select</span> t_id, c_id <span style="color:#66d9ef">from</span> Course <span style="color:#66d9ef">where</span> t_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> t_id <span style="color:#66d9ef">from</span> Teacher <span style="color:#66d9ef">where</span> t_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;张三&#34;</span>)) t
<span style="color:#66d9ef">join</span> 
(<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score,c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id) sco
<span style="color:#66d9ef">on</span> t.c_id<span style="color:#f92672">=</span>sco.c_id) <span style="color:#66d9ef">as</span> ss2 
<span style="color:#66d9ef">on</span> ss1.c_id<span style="color:#f92672">=</span>ss2.sco_cid;

<span style="color:#75715e">-- 更新上面的内连接表
</span><span style="color:#75715e"></span><span style="color:#66d9ef">update</span> Score <span style="color:#66d9ef">as</span> ss1 <span style="color:#66d9ef">join</span> (<span style="color:#66d9ef">select</span> sco.c_id <span style="color:#66d9ef">as</span> sco_cid,sco.avg_score <span style="color:#66d9ef">as</span> sco_avg_socre <span style="color:#66d9ef">from</span> 
(<span style="color:#66d9ef">select</span> t_id, c_id <span style="color:#66d9ef">from</span> Course <span style="color:#66d9ef">where</span> t_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> t_id <span style="color:#66d9ef">from</span> Teacher <span style="color:#66d9ef">where</span> t_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;张三&#34;</span>)) t
<span style="color:#66d9ef">join</span> 
(<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score,c_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id) sco
<span style="color:#66d9ef">on</span> t.c_id<span style="color:#f92672">=</span>sco.c_id) <span style="color:#66d9ef">as</span> ss2 
<span style="color:#66d9ef">on</span> ss1.c_id<span style="color:#f92672">=</span>ss2.sco_cid 
<span style="color:#66d9ef">set</span> ss1.s_score<span style="color:#f92672">=</span>ss2.sco_avg_socre;
</code></pre></div><ul>
<li>按各科平均成绩从低到高和及格率的百分数从高到低排列，以如下形式显示: 课程号，课程名平均成绩，及格百分数</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 查询课程号与课程平均成绩
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> c_id, <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id;

<span style="color:#75715e">-- 及格百分数
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">select</span> s1.c_id, jige<span style="color:#f92672">/</span>all_chenji, s2.avg_score
<span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">as</span> s1
<span style="color:#66d9ef">join</span> (<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">sum</span>(<span style="color:#66d9ef">case</span> <span style="color:#66d9ef">when</span> s_score <span style="color:#f92672">&gt;=</span><span style="color:#ae81ff">60</span> <span style="color:#66d9ef">then</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">else</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">end</span>) <span style="color:#66d9ef">as</span> jige,
<span style="color:#66d9ef">count</span>(s_id)all_chenji,
<span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">as</span> avg_score,
c_id
<span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> c_id
) <span style="color:#66d9ef">as</span> s2 
<span style="color:#66d9ef">on</span> s1.c_id<span style="color:#f92672">=</span>s2.c_id <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s1.c_id 
<span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> s2.avg_score <span style="color:#66d9ef">ASC</span>, jige<span style="color:#f92672">/</span>all_chenji <span style="color:#66d9ef">DESC</span>;
</code></pre></div><ul>
<li>查询不同老师所教不同课程平均分从高到低显示</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> t.t_name, <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">from</span> Teacher <span style="color:#66d9ef">as</span> t
<span style="color:#66d9ef">join</span>
Course <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">c</span>
<span style="color:#66d9ef">on</span> t.t_id<span style="color:#f92672">=</span><span style="color:#66d9ef">c</span>.t_id
<span style="color:#66d9ef">join</span>
Score <span style="color:#66d9ef">as</span> sco
<span style="color:#66d9ef">on</span> <span style="color:#66d9ef">c</span>.c_id<span style="color:#f92672">=</span>sco.c_id <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> sco.c_id
<span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">DESC</span>;
</code></pre></div><ul>
<li>查询学生平均成绩及其名次</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s_id,<span style="color:#66d9ef">avg</span>(s_score),<span style="color:#f92672">@</span>curRank:<span style="color:#f92672">=@</span>curRank <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">from</span> Score s1,(<span style="color:#66d9ef">select</span> <span style="color:#f92672">@</span>curRank:<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>) q <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id;
</code></pre></div><ul>
<li>查询各科成绩前三名的记录（不考虑成绩并列情况）</li>
</ul>
<h3 id="待解决">待解决</h3>
<ul>
<li>查询所有学生的学号、姓名、选课数、总成绩</li>
</ul>
<h4 id="所有学生-用左连接-查到所有学生">所有学生, 用左连接, 查到所有学生</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 学号,姓名在Student表中, 学号,选课数,总成绩在Score表中, 左连接起来
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s.s_id, s.s_name,<span style="color:#66d9ef">count</span>(c_id),<span style="color:#66d9ef">sum</span>(s_score) <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">as</span> s
<span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span>
Score <span style="color:#66d9ef">as</span> sco
<span style="color:#66d9ef">on</span> s.s_id<span style="color:#f92672">=</span>sco.s_id
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id;
</code></pre></div><ul>
<li>查询平均成绩大于85的所有学生的学号、姓名和平均成绩</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#75715e">-- 学号,姓名在Student表中, 平均成绩,选课数在Score表中, 左连接起来
</span><span style="color:#75715e"></span><span style="color:#66d9ef">select</span> s.s_id, s.s_name,<span style="color:#66d9ef">avg</span>(s_score) <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">as</span> s
<span style="color:#66d9ef">left</span> <span style="color:#66d9ef">join</span>
Score <span style="color:#66d9ef">as</span> sco
<span style="color:#66d9ef">on</span> s.s_id<span style="color:#f92672">=</span>sco.s_id
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id
<span style="color:#66d9ef">having</span> <span style="color:#66d9ef">avg</span>(s_score)<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">85</span>;
</code></pre></div><ul>
<li>查询有2门不同课程成绩相同的学生的学号、课程号、学生成绩</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> s1.s_id,s1.c_id,s1.s_score <span style="color:#66d9ef">from</span> Score s1,Score s2
<span style="color:#66d9ef">where</span> s1.s_id<span style="color:#f92672">=</span>s2.s_id
<span style="color:#66d9ef">and</span> s1.s_score<span style="color:#f92672">=</span>s2.s_score
<span style="color:#66d9ef">and</span> s1.c_id<span style="color:#f92672">&lt;&gt;</span>s2.c_id
<span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s1.s_id,s1.c_id;
</code></pre></div><ul>
<li>查询选修了全部课程的学生信息</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> Student <span style="color:#66d9ef">where</span> s_id <span style="color:#66d9ef">in</span> (<span style="color:#66d9ef">select</span> s_id <span style="color:#66d9ef">from</span> Score <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> s_id <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(c_id)<span style="color:#f92672">=</span>(<span style="color:#66d9ef">select</span> <span style="color:#66d9ef">count</span>(c_id) <span style="color:#66d9ef">from</span> Course));

</code></pre></div></div>
  
</article></main>
<footer class="footer">
  <span>&copy; 2020 <a href="https://charles-one.github.io/actiger/">Actiger跳跳虎</a></span>
  <span>&middot;</span>
  <span><a href="https://gohugo.io/" rel="noopener" target="_blank">Powered by Hugo️️</a>️</span>
  <span>&middot;</span>
  <span><a href="https://github.com/nanxiaobei/hugo-paper" rel="noopener" target="_blank">Theme️ Paper</a></span>
</footer>
<script src="https://charles-one.github.io/actiger/highlight.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script>
</body>
</html>

